package controller;

import java.util.UUID;

import javax.faces.context.FacesContext;
import javax.faces.model.SelectItem;
import javax.servlet.http.HttpSession;

import modelo.Persona;
import modelo.Sexo;
import modelo.Tipo_USER;
import modeloDAO.PersonaDAO;

public class PersonaBean 
{
	private PersonaDAO pDao = new PersonaDAO();
	private Persona usr = new Persona();

	public PersonaBean(){}
	
	public Persona getUsr() {
		return usr;
	}

	public void setUsr(Persona usr) {
		this.usr = usr;
	}
	
	public String altaPersona()
	{
		String pass = UUID.randomUUID().toString().substring(0, 6);
		usr.setPass(pass);
		usr.setHabilitado(true);
		pDao.guardarPersona(usr);
		return "exito";
	}
	
	public Persona getUsrLogin() {
		return usrLogin;
	}

	public void setUsrLogin(Persona usrLogin) {
		this.usrLogin = usrLogin;
	}
	
	// Prueba para usar enumerativo en JSF
	public SelectItem[] getGenderValues()
	{
		SelectItem[] items = new SelectItem[Sexo.values().length];
	    int i = 0;
	    for(Sexo g: Sexo.values())
	    {
	      items[i++] = new SelectItem(g, g.name());
	    }
	    return items;
	  }
	
	public SelectItem[] getTipoValues()
	{
		SelectItem[] items = new SelectItem[Tipo_USER.values().length];
	    int i = 0;
	    for(Tipo_USER g: Tipo_USER.values())
	    {
	      items[i++] = new SelectItem(g, g.name());
	    }
	    return items;
	}
	
}
