package controller;

import java.util.List;
import java.util.UUID;

import javax.faces.context.FacesContext;
import javax.servlet.http.HttpSession;

import modelo.Persona;

public class AdminBean 
{

	public AdminBean(){}
	
	public String altaPersona()
	{
		String pass = UUID.randomUUID().toString().substring(0, 6);
		usr.setPass(pass);
		usr.setHabilitado(true);
		pDao.guardarPersona(usr);
		return "exito";
	}
	
	public String editarPersona()
	{
		pDao.modificarPersona(usrLogin);
		return "editarExitoso";
	}
	
	public List<Persona> recuperarUsuarios()
	{
		this.listaUsuarios =  pDao.recuperarUsuarios();
		return listaUsuarios;
	}
	
	public String habilitarPersona(Persona selec)	// --> parametro enviado desde el xhtml
	{
		selec.setHabilitado(!selec.getHabilitado());
		pDao.modificarPersona(selec);
		return null;
	}
	
	public String actualizar()
	{
		if(this.usrLogin == null)
		{	
			HttpSession session;
			FacesContext context = FacesContext.getCurrentInstance();
		    session = (HttpSession) context.getExternalContext().getSession(true);
		       
			Long id = (Long) session.getAttribute("usrId");
			if(id != null)
			{
				this.usrLogin = pDao.recuperarPersona(id);
			}
		}
		return "adminPerfil";
	}
	
	
}
